<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yufeng.dao.FastConsumerLoanOrderDao">

    <!--订单 -->
    <resultMap type="FastConsumerLoanOrder" id="FastConsumerLoanOrderMap">  
        <result column="unique_id" property="uniqueId"/>  
        <result column="order_id" property="orderId"/>
        <result column="order_type" property="orderType"/>
        <result column="user_internal_code" property="userInternalCode"/>
        <result column="order_state" property="orderState"/>
        <result column="invoice_number" property="invoiceNumber"/>
        <result column="total_amount" property="totalAmount"/>
        <result column="discount_price" property="discountPrice"/>
        <result column="order_discount_price" property="orderDiscountPrice"/>
        <result column="create_time" property="createTime"/>
        <result column="mod_time" property="modTime"/>
    </resultMap> 
   
    <select id="getFastConsumerLoanOrderById" parameterType="String" resultMap="FastConsumerLoanOrderMap" >

            SELECT * FROM fast_consumer_loan_order_table WHERE unique_id=#{uniqueId}

    </select>
    
    <select id="getFastConsumerLoanOrderByOrderId" parameterType="String" resultMap="FastConsumerLoanOrderMap" >

            SELECT * FROM fast_consumer_loan_order_table WHERE order_id=#{orderId}

    </select>
    
   <insert id="insertFastConsumerLoanOrder">

        INSERT ignore INTO fast_consumer_loan_order_table(unique_id,order_id,order_type,user_internal_code,order_state,invoice_number,total_amount,discount_price,order_discount_price,create_time)
        VALUES (#{uniqueId},#{orderId},#{orderType},#{userInternalCode},#{orderState},#{invoiceNumber},#{totalAmount},#{discountPrice},#{orderDiscountPrice},#{createTime})

    </insert>

    <update id="updateFastConsumerLoanOrder">
        
        UPDATE fast_consumer_loan_order_table
        
        <set>  
        <if test="orderId !=null">  
            order_id = #{orderId},  
        </if>
        <if test="orderType !=null">  
            order_type = #{orderType},  
        </if>
        <if test="userInternalCode !=null">  
            user_internal_code = #{userInternalCode},  
        </if>
        <if test="orderState !=null">  
            order_state = #{orderState},  
        </if>
        <if test="invoiceNumber !=null">  
            invoice_number = #{invoiceNumber},  
        </if>
        <if test="totalAmount !=null">  
            total_amount = #{totalAmount},  
        </if>
        <if test="discountPrice !=null">  
            discount_price = #{discountPrice},  
        </if>
        <if test="orderDiscountPrice !=null">  
            order_discount_price = #{orderDiscountPrice},  
        </if>
        <if test="modTime !=null">  
            mod_time = #{modTime},  
        </if>
        </set>
        
        WHERE unique_id = #{uniqueId}
        
    </update>
    
   
   
   
    <!--商品 -->
    <resultMap type="FastConsumerLoanOrderCommodity" id="FastConsumerLoanOrderCommodityMap">  
        <result column="unique_id" property="uniqueId"/>  
        <result column="commodity_id" property="commodityId"/>
        <result column="commodity_name" property="commodityName"/>
        <result column="order_id" property="orderId"/>
        <result column="price" property="price"/>
        <result column="number" property="number"/>
        <result column="user_internal_code" property="userInternalCode"/>
        <result column="seller_internal_code" property="sellerInternalCode"/>
        <result column="total_amount" property="totalAmount"/>
        <result column="information_state" property="informationState"/>
        <result column="pay_method" property="payMethod"/>
        <result column="pay_name" property="payName"/>
        <result column="pay_code" property="payCode"/>
        <result column="external_pay_number" property="externalPayNumber"/>
        <result column="pay_time" property="payTime"/>
        <result column="order_time" property="orderTime"/>
        <result column="send_time" property="sendTime"/>
        <result column="pay_message" property="payMessage"/>
        <result column="receipt_time" property="receiptTime"/>
        <result column="finish_time" property="finishTime"/>
        <result column="discount_price" property="discountPrice"/>
        <result column="anonymous" property="anonymous"/>
        <result column="create_time" property="createTime"/>
        <result column="mod_time" property="modTime"/>
    </resultMap>
    
    <select id="getFastConsumerLoanOrderCommodityById" parameterType="String" resultMap="FastConsumerLoanOrderCommodityMap" >

            SELECT * FROM fast_consumer_loan_order_commodity_table WHERE unique_id=#{uniqueId}

    </select>
    
    <select id="getFastConsumerLoanOrderCommodityByOrderId" parameterType="String" resultMap="FastConsumerLoanOrderCommodityMap" >

            SELECT * FROM fast_consumer_loan_order_commodity_table WHERE order_id=#{orderId}

    </select>
    
   <insert id="insertFastConsumerLoanOrderCommodity">

        INSERT ignore INTO fast_consumer_loan_order_commodity_table(unique_id,commodity_id,commodity_name,order_id,price,number,user_internal_code,seller_internal_code,total_amount,information_state,pay_method,pay_name,pay_code,external_pay_number,pay_time,order_time,send_time,pay_message,receipt_time,finish_time,discount_price,anonymous,create_time)
        VALUES (#{uniqueId},#{commodityId},#{commodityName},#{orderId},#{price},#{number},#{userInternalCode},#{sellerInternalCode},#{totalAmount},#{informationState},#{payMethod},#{payName},#{payCode},#{externalPayNumber},#{payTime},#{orderTime},#{sendTime},#{payMessage},#{receiptTime},#{finishTime},#{discountPrice},#{anonymous},#{createTime})

    </insert>

    <update id="updateFastConsumerLoanOrderCommodity">
        
        UPDATE fast_consumer_loan_order_commodity_table
    
        <set>  
        <if test="commodityId !=null">  
            commodity_id = #{commodityId},  
        </if>
        <if test="commodityName !=null">  
            commodity_name = #{commodityName},  
        </if>
        <if test="orderId !=null">  
            order_id = #{orderId},  
        </if>
        <if test="price !=null">  
            price = #{price},  
        </if>
        <if test="number !=null">  
            number = #{number},  
        </if>
        <if test="userInternalCode !=null">  
            user_internal_code = #{userInternalCode},  
        </if>
        <if test="sellerInternalCode !=null">  
            seller_internal_code = #{sellerInternalCode},  
        </if>
        <if test="totalAmount !=null">  
            total_amount = #{totalAmount},  
        </if>
        <if test="informationState !=null">  
            information_state = #{informationState},  
        </if>
        <if test="payMethod !=null">  
            pay_method = #{payMethod},  
        </if>
        <if test="payName !=null">  
            pay_name = #{payName},  
        </if>
        <if test="payCode !=null">  
            pay_code = #{payCode},  
        </if>
        <if test="externalPayNumber !=null">  
            external_pay_number = #{externalPayNumber},  
        </if>
        <if test="payTime !=null">  
            pay_time = #{payTime},  
        </if>
        <if test="orderTime !=null">  
            order_time = #{orderTime},  
        </if>
        <if test="sendTime !=null">  
            send_time = #{sendTime},  
        </if>
        <if test="payMessage !=null">  
            pay_message = #{payMessage},  
        </if>
        <if test="receiptTime !=null">  
            receipt_time = #{receiptTime},  
        </if>
        <if test="finishTime !=null">  
            finish_time = #{finishTime},  
        </if>
        <if test="discountPrice !=null">  
            discount_price = #{discountPrice},  
        </if>
        <if test="anonymous !=null">  
            anonymous = #{anonymous},  
        </if>
        <if test="modTime !=null">  
            mod_time = #{modTime},  
        </if>
        </set>
    
        WHERE unique_id = #{uniqueId}
        
    </update>
    
  




</mapper>